\setbeamertemplate{blocks}[default]
\setbeamertemplate{itemize items}[default]
\setbeamertemplate{enumerate items}[default]
\setbeamertemplate{bibliography item}{\insertbiblabel}
\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{footline}{\vspace*{1mm}\hfill
	\insertframenumber/\inserttotalframenumber\hfill\vspace*{1mm}}
\usepackage{minted}
\usepackage{blindtext}
\usepackage{fontspec}
\usepackage{booktabs}
\setsansfont{Source Sans Pro}
\setmonofont{Source Code Pro}
\usepackage[skins, minted, breakable, xparse]{tcolorbox}
\usepackage{graphicx}
\graphicspath{{images/}}

\usepackage{hyperref}
\hypersetup{luatex,unicode,bookmarks=true,hyperindex=true,bookmarksopen=true,bookmarksnumbered=true}
\usepackage[hyperrefcolorlinks]{menukeys}

%%% COLORS

%%% Global color

\definecolor{defaultColor}{HTML}{424242}
\definecolor{alternativeTextColor}{HTML}{FFFFFF}

\definecolor{coverDateColor}{HTML}{F8AD32}

\definecolor{internalLinkColor}{HTML}{FF9400}
\definecolor{externalLinkColor}{HTML}{1088BF}

\definecolor{chapterColor}{HTML}{EA9408}
\definecolor{sectionColor}{HTML}{EA9408}
\definecolor{subsectionColor}{HTML}{EA9408}
\definecolor{subsubsectionColor}{HTML}{EA9408}
\definecolor{paragraphColor}{HTML}{000000}
\definecolor{subparagraphColor}{HTML}{000000}

\definecolor{iframeColor}{HTML}{009700}

\definecolor{titlePageBackgroundColor}{HTML}{FFFFFF}
\definecolor{titlePageEditorColor}{HTML}{000000}
\definecolor{titlePageTextColor}{HTML}{000000}
\definecolor{titlePageAuthorColor}{HTML}{4D4D4D}

\definecolor{codeBackgroundColor}{HTML}{F7F7F7}
\definecolor{highlightCodeColor}{HTML}{E3E3E3}
\definecolor{lineNumberSeparatorCodeColor}{HTML}{BEBEC5}
\definecolor{lineNumberCodeColor}{HTML}{AEAEB5}

\definecolor{horizontalLineColor}{HTML}{CCCCCC}

%%%  BOX

% SUCCESS
\definecolor{ZdSBoxForegroundSuccess}{HTML}{3C763D}
\definecolor{ZdSBoxBackgroundSuccess}{HTML}{DFF0D8}
\definecolor{ZdSBoxBorderSuccess}{HTML}{C6D7BF}
\definecolor{ZdSBoxLogoBackgroundSuccess}{HTML}{16C13B}

% INFORMATION
\definecolor{ZdSBoxForegroundInformation}{HTML}{31708F}
\definecolor{ZdSBoxBackgroundInformation}{HTML}{D9EDF7}
\definecolor{ZdSBoxBorderInformation}{HTML}{C0D4DE}
\definecolor{ZdSBoxLogoBackgroundInformation}{HTML}{59ABE3}

% QUESTION
\definecolor{ZdSBoxForegroundQuestion}{HTML}{8D61CD}
\definecolor{ZdSBoxBackgroundQuestion}{HTML}{F0E9FC}
\definecolor{ZdSBoxBorderQuestion}{HTML}{D3BDF5}
\definecolor{ZdSBoxLogoBackgroundQuestion}{HTML}{8C4FE8}

% WARNING
\definecolor{ZdSBoxForegroundWarning}{HTML}{8A6D3B}
\definecolor{ZdSBoxBackgroundWarning}{HTML}{FCF4E5}
\definecolor{ZdSBoxBorderWarning}{HTML}{E3DBCC}
\definecolor{ZdSBoxLogoBackgroundWarning}{HTML}{F39539}

% ERROR
\definecolor{ZdSBoxForegroundError}{HTML}{A94442}
\definecolor{ZdSBoxBackgroundError}{HTML}{F2DEDE}
\definecolor{ZdSBoxBorderError}{HTML}{D9C5C5}
\definecolor{ZdSBoxLogoBackgroundError}{HTML}{C21936}

% NEUTRAL
\definecolor{ZdSBoxForegroundNeutral}{HTML}{424242}
\definecolor{ZdSBoxBackgroundNeutral}{HTML}{FFFFFF}
\definecolor{ZdSBoxBorderNeutral}{HTML}{4D4D4D}
\definecolor{ZdSBoxLogoBackgroundNeutral}{HTML}{808080}

% SPOILER
\definecolor{ZdSBoxForegroundSpoiler}{HTML}{555555}
\definecolor{ZdSBoxBackgroundSpoiler}{HTML}{EEEEEE}
\definecolor{ZdSBoxBorderSpoiler}{HTML}{DDDDDD}

% QUOTATION
\definecolor{ZdSBoxBorderLeftQuotation}{HTML}{CCCCCC}
\definecolor{ZdSBoxForegroundQuotation}{HTML}{555555}

\hypersetup{linkcolor=internalLinkColor}

%%% ICONS ----------------------------------------------------------------------

\def\boxIcon{[draw=none] circle (0.3cm)}

\DeclareRobustCommand{\linkIcon}{\tikz[x=1.2ex, y=1.2ex, baseline=-0.05ex]{%
		\begin{scope}[x=1ex, y=1ex]
			\clip (-0.1,-0.1)
			--++ (-0, 1.2)
			--++ (0.6, 0)
			--++ (0, -0.6)
			--++ (0.6, 0)
			--++ (0, -1);
			\path[draw,
			line width = 0.5,
			rounded corners=0.5]
			(0,0) rectangle (1,1);
		\end{scope}
		\path[draw, line width = 0.5] (0.5, 0.5) -- (1, 1);
		\path[draw, line width = 0.5] (0.6, 1) -- (1, 1) -- (1, 0.6);}
}

\def\spoilerIcon{%
	\begin{tikzpicture}[scale=0.05]
		\draw[semithick](-3,0) .. controls (-2,2.5) and (2,2.5) .. (3,0) .. controls (2,-2.5) and (-2,-2.5) .. (-3,0)--cycle;
		\draw[thin](0,0.6) arc (90:180:0.6cm);
		\draw (0,0) circle [radius=1.2];
\end{tikzpicture}}

% Create box icon
\newcommand{\createBoxIcon}[2]{
	\begin{tikzpicture} %
		\fill (0, 0.5) [color=#1] \boxIcon; %
		\draw (0, 0.5) \boxIcon node[draw=none, text=white, text width=0.5cm, align=flush center] {\Large\sffamily$\boldsymbol{#2}$}; %
	\end{tikzpicture} %
}

%%% DEFAULT BOX THEME

\tcbsetforeverylayer{%
	enhanced,
	enlarge top initially by=5mm,
	boxrule=0.5pt,
	breakable,
	arc=0.0pt,
}

\NewDocumentCommand\newBox{m m m m m o}{%
	\DeclareTColorBox{#1}{ o }{
		colback=#2,
		coltext=#3,
		colframe=#4,
		colbacktitle=#5,
		titlerule=0mm,
		IfValueTF={##1}{title=##1}{},
		overlay={
			\IfValueTF{#6}
			{\node at (frame.north west) {\createBoxIcon{#5}{#6}};}
			{}
		}
	}%
}

\newBox{Success}{ZdSBoxBackgroundSuccess}{ZdSBoxForegroundSuccess}{ZdSBoxBorderSuccess}{ZdSBoxLogoBackgroundSuccess}[\checkmark]
\newBox{Information}{ZdSBoxBackgroundInformation}{ZdSBoxForegroundInformation}{ZdSBoxBorderInformation}{ZdSBoxLogoBackgroundInformation}[i]
\newBox{Question}{ZdSBoxBackgroundQuestion}{ZdSBoxForegroundQuestion}{ZdSBoxBorderQuestion}{ZdSBoxLogoBackgroundQuestion}[?]
\newBox{Warning}{ZdSBoxBackgroundWarning}{ZdSBoxForegroundWarning}{ZdSBoxBorderWarning}{ZdSBoxLogoBackgroundWarning}[!]
\newBox{Error}{ZdSBoxBackgroundError}{ZdSBoxForegroundError}{ZdSBoxBorderError}{ZdSBoxLogoBackgroundError}[\times]
\newBox{Neutral}{ZdSBoxBackgroundNeutral}{ZdSBoxForegroundNeutral}{ZdSBoxBorderNeutral}{ZdSBoxLogoBackgroundNeutral}

\setminted{
	breaklines,
	breaksymbolleft=\hspace{2em},
	highlightcolor=highlightCodeColor,
	linenos,
	tabsize=2,
	fontsize=\footnotesize,
	baselinestretch=1,
	breakanywhere=true
}

\DeclareTCBListing{CodeBlock}{O{}O{}O{1}m}{%
	enlarge top initially by=1mm,
	enlarge bottom finally by=1mm,
	boxrule=0.5pt,
	breakable,
	colback=codeBackgroundColor,
	coltext=defaultColor,
	colframe=ZdSBoxBorderSpoiler,
	arc=0.0pt,
	listing engine=minted,
	listing only,
	minted style=colorful,
	minted language=#4,
	minted options={highlightlines={#2}, firstnumber=#3,numbersep=3mm},
	enhanced,
	overlay={\begin{tcbclipinterior}\fill[lineNumberSeparatorCodeColor] ([xshift=4mm-0.5pt]frame.south west)
			rectangle ([xshift=4mm]frame.north west);\end{tcbclipinterior}},
	%left=8mm,
	title=#1,
	attach boxed title to bottom center,
	boxed title style={empty,boxrule=0.5mm},
	coltitle=defaultColor
}